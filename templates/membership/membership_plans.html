{% extends 'base.html' %}
{% load static %}

{% block title %}Membership Plans - TrainWise{% endblock %}

{% block content %}

{% if messages %}
<div class="messages-container" style="max-width:600px; margin:1rem auto;">
    {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}" 
             style="margin-bottom:1rem; padding:0.75rem; border-radius:4px; background:#f0f0f0;">
            {{ message }}
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- Membership Plans Section -->
<section class="features">
    <h1 style="text-align:center; margin-bottom:2rem;">Our Membership Plans</h1>

    <div class="features-grid">

        {% for plan in plans %}
        <div class="feature-card" style="text-align:center; max-width:250px; margin:auto;">
            <div class="feature-icon">ðŸ’ª</div>

            <h3>{{ plan.plan_name }}</h3>
            <p style="font-size:1.2rem; font-weight:600;">
                â‚¹{{ plan.price }} / {{ plan.duration_months }} months
            </p>

            <p style="margin:0.5rem 0 1rem;">
                {{ plan.description|default:"No description provided." }}
            </p>

            {% if user.is_authenticated %}
                <form method="POST" action="{% url 'purchase-membership' plan.id %}" style="width: 100%;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Subscribe</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}?next={% url 'membership-plans' %}" class="btn btn-primary">
                    Login to Subscribe
                </a>
            {% endif %}
        </div>
        {% empty %}
            <p style="text-align:center;">No membership plans available</p>
        {% endfor %}

    </div>
</section>

<!-- CTA Section -->
<section class="cta-section" style="margin-top:3rem; text-align:center;">
    <h2>Start Training Smarter Today</h2>
    <p>No contracts. Cancel anytime.</p>

    {% if not user.is_authenticated %}
        <a href="{% url 'register' %}" class="btn btn-primary btn-large">
            Create Free Account
        </a>
    {% endif %}
</section>

{% endblock %}
