{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Member - TrainWise{% endblock %}
{% block body_class %}class="hide-navbar"{% endblock %}

{% block content %}
<main class="dashboard-main form-page">
    {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="form-card">
        <h1 class="form-title">Edit Member</h1>

        <form method="POST">
            {% csrf_token %}

            <div class="form-group">
                <label>Username <span style="color:red;">*</span></label>
                <input type="text" name="username" value="{{ member.username }}" required class="form-control">
            </div>

            <div class="form-group">
                <label>First Name <span style="color:red;">*</span></label>
                <input type="text" name="first_name" value="{{ member.first_name }}" required class="form-control">
            </div>

            <div class="form-group">
                <label>Last Name <span style="color:red;">*</span></label>
                <input type="text" name="last_name" value="{{ member.last_name }}" required class="form-control">
            </div>

            <div class="form-group">
                <label>Email <span style="color:red;">*</span></label>
                <input type="email" name="email" value="{{ member.email }}" required class="form-control">
            </div>

            <div class="form-group">
                <label>New Password</label>
                <input type="password" name="password" placeholder="Leave blank to keep current password" class="form-control">
            </div>

            <div class="form-group">
                <label>Phone</label>
                <input type="text" name="phone" value="{{ member.phone }}" class="form-control">
            </div>

            <div class="form-group">
                <label>Gender</label>
                <select name="gender" class="form-control">
                    <option value="">Select Gender</option>
                    <option value="Male" {% if member.gender == "Male" %}selected{% endif %}>Male</option>
                    <option value="Female" {% if member.gender == "Female" %}selected{% endif %}>Female</option>
                    <option value="Other" {% if member.gender == "Other" %}selected{% endif %}>Other</option>
                </select>
            </div>

            <div class="form-group">
                <label>Age</label>
                <input type="number" name="age" min="0" value="{{ member.age }}" class="form-control">
            </div>

            <div class="form-group">
                <label>Height (cm)</label>
                <input type="number" step="0.01" name="height" value="{{ member.height }}" class="form-control">
            </div>

            <div class="form-group">
                <label>Weight (kg)</label>
                <input type="number" step="0.01" name="weight" value="{{ member.weight }}" class="form-control">
            </div>

            <div class="form-group">
                <label>Fitness Goal</label>
                <input type="text" name="fitness_goal" value="{{ member.fitness_goal }}" class="form-control">
            </div>

            <div class="form-group">
                <label>Membership Start Date</label>
                <input type="date" name="membership_start_date" value="{{ member.membership_start_date }}" class="form-control">
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="is_active" {% if member.is_active %}checked{% endif %}>
                    Active
                </label>
            </div>

            <button type="submit" class="btn btn-primary btn-full">
                Update Member
            </button>
        </form>

        <a href="{% url 'admin-members' %}" class="btn btn-secondary btn-full form-back-link">
            ‚Üê Back to Members
        </a>
    </div>
</main>
{% endblock %}
