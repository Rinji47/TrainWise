{% extends 'base.html' %}
{% load static %}

{% block title %}Profile Settings - TrainWise{% endblock %}

{% block body_class %}class="hide-navbar"{% endblock %}

{% block content %}
<div class="dashboard-container">
    {% include 'user/components/sidebar_nav.html' %}

    <main class="dashboard-main">
        <div class="dashboard-header">
            <h1>Profile Settings</h1>
            <p>Manage your personal and fitness information</p>
        </div>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Personal Info -->
        <div class="dashboard-section">
            <h2>Personal Information</h2>
            <form method="POST" class="profile-form">
                {% csrf_token %}
                <div class="form-group">
                    <label>First Name</label>
                    <input type="text" name="first_name" value="{{ user.first_name }}" placeholder="First Name" class="form-control">
                </div>
                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" name="last_name" value="{{ user.last_name }}" placeholder="Last Name" class="form-control">
                </div>
                <div class="form-group">
                    <label>Email (readonly)</label>
                    <input type="email" name="email" value="{{ user.email }}" readonly class="form-control">
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="text" name="phone" value="{{ user.phone }}" class="form-control">
                </div>
                <div class="form-group">
                    <label>Gender</label>
                    <select name="gender" class="form-control">
                        <option value="" {% if not user.gender %}selected{% endif %}>Select Gender</option>
                        <option value="Male" {% if user.gender == "Male" %}selected{% endif %}>Male</option>
                        <option value="Female" {% if user.gender == "Female" %}selected{% endif %}>Female</option>
                        <option value="Other" {% if user.gender == "Other" %}selected{% endif %}>Other</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Update Personal Info</button>
            </form>
        </div>

        <!-- Fitness Info -->
        <div class="dashboard-section">
            <h2>Fitness Profile</h2>
            <form method="POST" class="profile-form">
                {% csrf_token %}
                <div class="form-group">
                    <label>Age</label>
                    <input type="number" name="age" value="{{ user.age }}" class="form-control">
                </div>
                <div class="form-group">
                    <label>Height (cm)</label>
                    <input type="number" step="0.1" name="height" value="{{ user.height }}" class="form-control">
                </div>
                <div class="form-group">
                    <label>Weight (kg)</label>
                    <input type="number" step="0.1" name="weight" value="{{ user.weight }}" class="form-control">
                </div>
                <div class="form-group">
                    <label>Fitness Goal</label>
                    <input type="text" name="fitness_goal" value="{{ user.fitness_goal }}" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Update Fitness Info</button>
            </form>
        </div>

        <!-- Change Password -->
        <div class="dashboard-section">
            <h2>Change Password</h2>
            <form method="POST" class="profile-form">
                {% csrf_token %}
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" name="current_password" placeholder="Current Password" class="form-control">
                </div>
                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" name="new_password" placeholder="New Password" class="form-control">
                </div>
                <div class="form-group">
                    <label>Confirm New Password</label>
                    <input type="password" name="confirm_new_password" placeholder="Confirm New Password" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Update Password</button>
            </form>
        </div>
    </main>
</div>
{% endblock %}
